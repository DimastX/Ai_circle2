# AI Circle Simulation

Проект для моделирования движения транспортных средств по круговой дороге с использованием SUMO (Simulation of Urban MObility) и EIDM (Enhanced Intelligent Driver Model). Проект включает в себя различные сценарии моделирования, включая анализ пробок и теорию пробок.

## Структура проекта

```
.
├── config/
│   ├── network/     # Файлы сети (circle.net.xml, circle.nod.xml, circle.edg.xml)
│   └── routes/      # Файлы маршрутов (генерируются автоматически)
├── data/
│   └── simulations/ # Результаты симуляций
├── results/
│   └── analysis/    # Результаты анализа данных
├── ring_files/      # Файлы для кольцевой дороги
├── src/
│   ├── generate_circle_rou_new.py  # Генератор маршрутов
│   ├── run_circle.py              # Скрипт запуска симуляции
│   ├── analyze_data.py           # Скрипт анализа данных
│   ├── new_breakdown.py          # Моделирование пробок (базовая версия)
│   ├── new_breakdown_N.py        # Моделирование пробок (расширенная версия)
│   ├── theory_breakdown.py       # Теоретический анализ пробок
│   └── circle_gen.py             # Генератор кольцевой дороги
└── requirements.txt # Зависимости проекта
```

## Установка

1. Установите SUMO (Simulation of Urban MObility):
   - Windows: Скачайте и установите с [официального сайта](https://sumo.dlr.de/docs/Installing/Windows.html)
   - Linux: `sudo apt-get install sumo`

2. Установите зависимости проекта:
   ```bash
   pip install -r requirements.txt
   ```

## Использование

### Базовое моделирование
1. Генерация маршрутов:
   ```bash
   cd src
   python generate_circle_rou_new.py
   ```

2. Запуск симуляции:
   ```bash
   cd src
   python run_circle.py
   ```

### Моделирование пробок
1. Базовая версия:
   ```bash
   cd src
   python new_breakdown.py
   ```

2. Расширенная версия:
   ```bash
   cd src
   python new_breakdown_N.py
   ```

### Теоретический анализ
```bash
cd src
python theory_breakdown.py
```

### Анализ данных
```bash
cd src
python analyze_data.py --file путь/к/файлу/с/данными.csv
```

## Параметры симуляции

### Базовые параметры
- Количество машин на каждом маршруте: 7
- Длина ребра: 87.15 метров
- Параметры EIDM:
  - Ускорение: 2.6 ± 0.5 м/с²
  - Замедление: 4.5 ± 0.5 м/с²
  - Сигма: 0.5 ± 0.1
  - Тау: 0.5 ± 0.1
  - Дельта: 0.5 ± 0.1
  - Степпинг: 0.5 ± 0.1

### Параметры моделирования пробок
- Время начала торможения: 10 секунд
- Длительность торможения: настраивается
- Количество автомобилей: настраивается
- Параметры EIDM могут быть модифицированы для различных сценариев

## Результаты

### Результаты симуляции
Результаты симуляции сохраняются в директории `data/simulations/` в формате CSV. 

### Результаты анализа
После завершения симуляции автоматически создаются следующие графики в директории `results/analysis/`:
- `velocity_time.png` - график скорости от времени V(t)
- `distance_time.png` - график пройденного расстояния от времени S(t)

На графиках:
- Красной линией выделен тормозящий автомобиль
- Синим цветом показаны остальные автомобили
- Вертикальной пунктирной линией отмечен момент торможения (10с) 