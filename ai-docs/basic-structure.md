# Базовая структура проекта

Этот документ описывает основную структуру каталогов и ключевых файлов проекта, предназначенного для анализа транспортных потоков, моделирования поведения водителей (IDM/EIDM) и проведения симуляций с использованием SUMO.

## Корневая директория проекта

В корне проекта находятся основные конфигурационные файлы, скрипты и директории с исходным кодом и результатами.

-   **`src/`**: Директория с исходным кодом Python. Подробнее см. ниже.
-   **`config/`**: Содержит конфигурационные файлы и шаблоны для симуляций SUMO (например, файлы сети `.net.xml`, маршрутов `.rou.xml`, и конфигурации симулятора `.sumocfg`). Организована по поддиректориям, соответствующим различным сценариям или конфигурациям (например, `config/circles/`).
-   **`results/`**: Директория, предназначенная для сохранения результатов выполнения симуляций SUMO. Скрипты обычно создают здесь поддиректории для каждого запуска или серии запусков, содержащие FCD-данные, данные с детекторов, логи и файлы анализа.
-   **`.supercode/`**: Служебная директория, используемая для хранения метаданных проекта и автоматически сгенерированной документации.
    -   `def.json`: JSON-файл с перечнем ключевых технологий, используемых в проекте.
    -   `docs/`: Содержит детальную Markdown-документацию по каждому основному Python-скрипту проекта.
-   **`README.md`**: Основной файл с описанием проекта, инструкциями по установке, настройке и общим использованием.
-   **`THEORETICAL_BACKGROUND.md`**: Документ с подробным изложением теоретических основ, моделей и формул, используемых в анализе транспортных потоков и моделей поведения водителей.
-   **`CODEBASE_STRUCTURE.md`**: (Автоматически сгенерированный) Документ, описывающий архитектуру проекта, сценарии использования и взаимодействие между основными компонентами.
-   **`requirements.txt`**: Стандартный файл Python, перечисляющий все необходимые библиотеки и их версии для корректной работы проекта.

## Директория `src` (Исходный код)

Директория `src/` содержит все основные Python-скрипты, реализующие логику проекта.

-   **`eidm_stability_analysis.py`**:
    Центральный скрипт проекта. Отвечает за теоретический анализ устойчивости моделей IDM/EIDM, построение диаграмм устойчивости, а также запуск и координацию серий симуляций SUMO для валидации теоретических результатов. Может интегрироваться с VSL-контроллером.

-   **`run_circle_simulation.py`**:
    Скрипт для запуска одиночных симуляций SUMO на кольцевой трассе. Управляет генерацией конфигурационных файлов SUMO (маршруты, детекторы), запуском симулятора, сбором FCD-данных и данных с детекторов. Взаимодействует с `traci_interaction.py` и может активировать `vsl_controller.py`.

-   **`analyze_circle_data.py`**:
    Отвечает за анализ данных, полученных в результате симуляций SUMO. Загружает FCD-данные и данные с детекторов, производит расчеты характеристик потока, генерирует графики (тепловые карты, V(t), Q(rho) и т.д.) и создает сводный JSON-файл (`analysis_summary.json`) с ключевыми метриками, включая информацию о наличии stop-and-go волн.

-   **`traci_interaction.py`**:
    Модуль, инкапсулирующий взаимодействие с SUMO через интерфейс TraCI. Предоставляет функции для управления симуляцией (старт, шаг, стоп), сбора данных с детекторов. Содержит класс `RealTimeWaveDetector` для обнаружения stop-and-go волн в реальном времени в ходе симуляции.

-   **`vsl_controller.py`**:
    Реализует логику контроллера VSL (Variable Speed Limits - Управление Переменными Скоростными Ограничениями). Предназначен для работы в связке с SUMO через TraCI с целью улучшения характеристик транспортного потока, например, для предотвращения или смягчения stop-and-go волн.
## Документация

Помимо файлов `README.md`, `THEORETICAL_BACKGROUND.md` и `CODEBASE_STRUCTURE.md`, детальная документация по каждому из основных Python-скриптов находится в директории `.supercode/docs/`. Эти Markdown-файлы предоставляют углубленное описание каждого модуля, его функций, зависимостей и сценариев использования.

Эта структура обеспечивает модульность и позволяет относительно независимо разрабатывать и тестировать различные компоненты системы анализа и моделирования транспортных потоков. 